<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premier League Virtual Random Result Generator</title>
    <link rel="icon" href="./images/pl-main-logo.png">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: blueviolet;
        }
        table {
            width: 100%; /* Change to 100% */
            margin: 20px auto;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: center; /* Center text in all cells */
        }
        th {
            background-color: orange;
        }
        h2 {
            text-align: center;
        }
        button {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            font-size: 16px;
            background-color: greenyellow;
            color: white;
            border: none;
            border-radius: 0 5px;
        }
        img {
            width: 30px; /* Adjust size as needed */
            height: auto;
        }

        .reset {
            background-color: red;
            border-radius: 0 5px;
            color: black;
        }
    </style>
</head>
<body>
    <h2>Premier League Fixtures</h2>

    <table id="fixturesTable">
        <thead>
            <tr>
                <th>#</th>
                <th>Home Team</th>
                <th></th>
                <th>Away Team</th>
                <th>Score</th>
            </tr>
        </thead>
        <tbody>
            <!-- Rows will be generated by JavaScript -->
        </tbody>
    </table>

    <button onclick="startGame()">Start</button>
    <button class="reset" onclick="resetGame()">Reset</button>

    <script>
        let teams = [
            { name: "BOU", img: "./images/t91.png" },
            { name: "BRE", img: "./images/t94.png" },
            { name: "WOL", img: "./images/t39.png" },
            { name: "FOR", img: "./images/t17.png" },
            { name: "NEW", img: "./images/t4.png" },
            { name: "WHU", img: "./images/t21.png" },
            { name: "BHA", img: "./images/t36.png" },
            { name: "EVE", img: "./images/t11.png" },
            { name: "FUL", img: "./images/t54.png" },
            { name: "IPS", img: "./images/t40.png" }
        ];

        let awayTeams = [
            { name: "MUN", img: "./images/t1.png" },
            { name: "AST", img: "./images/t7.png" },
            { name: "MCI", img: "./images/t43.png" },
            { name: "LEI", img: "./images/t13.png" },
            { name: "SOU", img: "./images/t20.png" },
            { name: "CHE", img: "./images/t8.png" },
            { name: "LIV", img: "./images/hj.svg" },
            { name: "CRY", img: "./images/t31.png" },
            { name: "TOT", img: "./images/t6.png" },
            { name: "ARS", img: "./images/t3.png" }
        ];

        let isStarted = false;
        let currentFixtures = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function generateRandomScore(maxTotalGoals) {
            let totalGoals = Math.floor(Math.random() * (maxTotalGoals + 1));
            let homeGoals = Math.floor(Math.random() * (totalGoals + 1));
            let awayGoals = totalGoals - homeGoals;
            return { home: homeGoals, away: awayGoals };
        }

        function displayFixtures() {
            let tableBody = document.querySelector("#fixturesTable tbody");
            tableBody.innerHTML = "";

            currentFixtures.forEach((fixture, index) => {
                let score = isStarted ? generateRandomScore(6) : { home: 0, away: 0 };
                let row = document.createElement("tr");
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td><img src="${fixture.home.img}" alt="${fixture.home.name} logo"> ${fixture.home.name}</td>
                    <td>vs</td>
                    <td><img src="${fixture.away.img}" alt="${fixture.away.name} logo"> ${fixture.away.name}</td>
                    <td>${score.home} : ${score.away}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        function startGame() {
            isStarted = true;
            displayFixtures();
        }

        function resetGame() {
            isStarted = false;

            // Shuffle both teams
            let shuffledTeams = shuffleArray([...teams]);
            let shuffledAwayTeams = shuffleArray([...awayTeams]);

            // Create fixtures with random switching of home and away teams
            currentFixtures = shuffledTeams.map((homeTeam, index) => {
                let awayTeam = shuffledAwayTeams[index];
                if (Math.random() < 0.5) { // Randomly switch home and away teams
                    return { home: awayTeam, away: homeTeam };
                } else {
                    return { home: homeTeam, away: awayTeam };
                }
            });

            displayFixtures();
        }

        // Initial display of fixtures
        resetGame();
    </script>

</body>
</html>
